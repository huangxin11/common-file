<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	</head>
	<body>
		<div id="box">
			<input type="checkbox" @change="handleChange" v-model="isAllChecked">全选
			<ul>
				<li v-for="data in datalist">
					<input type="checkbox" :value="data" v-model="checkgroup" @change="handLiChange">
					{{data}}
					<button type="button" @click="handleDelClick(data)">del</button>
					{{data.number}}
					<button type="button" @click="data.number++">add</button>
				</li>
			</ul>
			{{checkgroup}}
			<p>总金额计算:{{ getSum() }}</p>
		</div>
		<script type="text/javascript">
			var vm = new Vue({
				el: "#box",
				data: {
					checkgroup: [],
					isAllChecked: false,
					datalist: [{
							name: '商品1',
							price: 10,
							number: 2,
							id: '1'
						},
						{
							name: '商品2',
							price: 20,
							number: 2,
							id: '2'
						},
						{
							name: '商品3',
							price: 30,
							number: 2,
							id: '3'
						},
						{
							name: '商品4',
							price: 40,
							number: 2,
							id: '4'
						}
					]
				},
				methods: {
					getSum() {
						var sum = 0;
						for (var i in this.checkgroup) {
							sum += this.checkgroup[i].number * this.checkgroup[i].price
						}
						return sum;
					},
					handleChange() {
						console.log('改变了', this.isAllChecked)
						if (this.isAllChecked) {
							this.checkgroup = this.datalist
						} else {
							this.checkgroup = []
						}
					},
					handLiChange() {
						if (this.checkgroup.length === this.datalist.length) {
							this.isAllChecked = true
						} else {
							this.isAllChecked = false
						}
					},
					handleDelClick(data) {
						
							var number = data.number--;
						if (number === 1) {
							data.number = 1
						}
					}
				}
			})
		</script>
	</body>
</html>
